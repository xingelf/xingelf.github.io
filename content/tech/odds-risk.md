---
title: "オッズ比とリスク比"
date: "2021-09-01"
draft: false
categories:
  - "Tech"
tags:
  - "Math"
  - "Statistics"
  - "Machine Learning"
#featured_image: "/images/dices-over-newspaper.jpeg"
thumbnail: "/images/dices-over-newspaper.jpeg"

---


# オッズ比とリスク比について理解する

## リスク比とは
まずは理解が容易なリスク比からはじめます。
なお、以下の数字は完全に仮想的なものです。

|  |コロナ罹患|コロナ未罹患|合計|罹患率|
|--|--|--|--|--|
|マスク未着用|90|10|100|Pa = 90%|
|マスク着用|40|160|200|Pb = 20%|

ここで**リスク**は罹患率そのものを意味します。その比率である
**リスク比**は割合・〇倍で表現できます。つまり、罹患率の割合になりますので、

　$リスク比= \frac{Pa}{Pb} = 4.5$

**マスク未着用の場合、リスク比は4.5倍**

という表現をします。このように、マスクをしない場合はコロナ罹患リスクが4.5倍ということで、
リスク比は直感的に分かりやすいものです。

## オッズ比とは

まず、オッズを以下のように定義します。

$オッズ= \frac{P}{1-P} $

この定義をもとに先程のデータでオッズを求めます。

|  |コロナ罹患|コロナ未罹患|合計|罹患率|オッズ|
|--|--|--|--|--|--|
|マスク未着用|90|10|100|Pa = 90%|$\frac{0.9}{0.1}=9$|
|マスク着用|40|160|200|Pb = 20%|$\frac{0.2}{0.8}=0.25$|


オッズ比はこの比率になりますので、

$オッズ比= \frac{\frac{Pa}{1-Pa}}{\frac{Pb}{1-Pb}} = \frac{9}{0.25} = 38$

オッズ比は38になります。

## オッズ比を使う場面

一般的にはリスク比で十分な印象ですが、このオッズ比はどのような場面で使われるのでしょうか。
以下のようなケースがあります。

### 1.コホート研究（前向き研究＝将来事象分析）とケースコントロール研究（後ろ向き研究＝過去実績分析）のいずれにも利用できる
上記の例で言えば、それぞれ以下のようになります。

 - **コホート研究** マスク未着用者の記録を採取し、一定期間後のコロナ罹患結果を調べる手法
 - **ケースコントロール研究**　コロナ罹患者・未罹患者からヒアリングを行いマスク着用習慣をヒアリングする

コロナ罹患者のデータがケースコントロール研究で倍収集できたとしましょう。
ここで、マスク未着用・着用の比率は先程のデータと同じです。

 |  |コロナ罹患|コロナ未罹患|合計|罹患率|オッズ|
 |--|--|--|--|--|--|
 |マスク未着用|180|10|190|Pa = 95%|$\frac{0.95}{0.05}=19$|
 |マスク着用|80|160|240|Pb = 33%|$\frac{0.33}{0.66}=0.5$|

このようになります。この場合、

$リスク比= \frac{Pa}{Pb} = \frac{0.95}{0.33} = 2.9$

$オッズ比= \frac{\frac{Pa}{1-Pa}}{\frac{Pb}{1-Pb}} = \frac{19}{0.5} = 36$

**リスク比は2.9倍になりますが、オッズ比は36のままとなります。**

この定義から分かる通り、
ケースコントロール研究では、罹患データの収集数でリスク比が変わってしまいます。
一方、オッズ比については、どちらも変化がありません。

### 2.pが小さい場合はリスク比相当として扱うことができる
pが小さい場合は$1-p \simeq 1$として、リスク比はオッズ比から推定可能です。

$ オッズ比 = \frac{\frac{Pa}{1-Pa}}{\frac{Pb}{1-Pb}} =  \frac{Pa}{Pb} = リスク比$

### ロジスティック回帰との関係

オッズは確率Pをシグモイド関数で表現した場合、以下のように表現できます。

$ オッズ= \frac{P}{1-P} = \frac{\frac{1}{1+exp(-\bf{w}^T\bf{x}+b)}}{1-\frac{1}{1+exp(-\bf{w}^T\bf{x}+b)}}
       = e^{-\bf{w}^T\bf{x}+b} $

$\bf{x}$:説明変数のベクトル


---

## 参考動画

{{< youtube _DdE97C7Hq0 >}}
